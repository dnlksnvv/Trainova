{"openapi":"3.1.0","info":{"title":"Profile Management Service","description":"Сервис управления профилем пользователя","version":"1.0.0"},"paths":{"/profile/me":{"get":{"tags":["Profile"],"summary":"Get My Profile","operationId":"get_my_profile_profile_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/profile/subscriptions":{"get":{"tags":["Profile"],"summary":"List Subscriptions","operationId":"list_subscriptions_profile_subscriptions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionsResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/profile/payments":{"get":{"tags":["Profile"],"summary":"List Payments","operationId":"list_payments_profile_payments_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentsResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/profile/password-change":{"put":{"tags":["Profile"],"summary":"Change Password","operationId":"change_password_profile_password_change_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/profile/email-change":{"put":{"tags":["Profile"],"summary":"Change Email","operationId":"change_email_profile_email_change_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeEmailRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/profile/phone-change":{"put":{"tags":["Profile"],"summary":"Change Phone","operationId":"change_phone_profile_phone_change_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePhoneRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/profile/name-change":{"put":{"tags":["Profile"],"summary":"Change Name","operationId":"change_name_profile_name_change_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeNameRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/profile/avatar-change":{"put":{"tags":["Profile"],"summary":"Change Avatar","operationId":"change_avatar_profile_avatar_change_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeAvatarRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/profile/payment-method":{"get":{"tags":["Profile"],"summary":"Get Current Payment Method","operationId":"get_current_payment_method_profile_payment_method_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentMethodResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/profile/payment-method-change":{"put":{"tags":["Profile"],"summary":"Change Payment Method","operationId":"change_payment_method_profile_payment_method_change_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePaymentMethodRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/profile/available-payment-methods":{"get":{"tags":["Profile"],"summary":"List Available Payment Methods","operationId":"list_available_payment_methods_profile_available_payment_methods_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailablePaymentMethodsResponse"}}}}}}},"/profile/subscription":{"delete":{"tags":["Profile"],"summary":"Cancel User Subscription","operationId":"cancel_user_subscription_profile_subscription_delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"course_id","in":"query","required":true,"schema":{"type":"string","title":"Course Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AvailablePaymentMethodsResponse":{"properties":{"methods":{"items":{"type":"string"},"type":"array","title":"Methods"}},"type":"object","required":["methods"],"title":"AvailablePaymentMethodsResponse"},"ChangeAvatarRequest":{"properties":{"avatar_url":{"type":"string","title":"Avatar Url"},"verification_code":{"type":"string","title":"Verification Code"}},"type":"object","required":["avatar_url","verification_code"],"title":"ChangeAvatarRequest"},"ChangeEmailRequest":{"properties":{"new_email":{"type":"string","minLength":3,"title":"New Email"},"verification_code":{"type":"string","title":"Verification Code"}},"type":"object","required":["new_email","verification_code"],"title":"ChangeEmailRequest"},"ChangeNameRequest":{"properties":{"first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"}},"type":"object","required":["first_name","last_name"],"title":"ChangeNameRequest"},"ChangePasswordRequest":{"properties":{"old_password":{"type":"string","minLength":6,"title":"Old Password"},"new_password":{"type":"string","minLength":6,"title":"New Password"},"new_password_confirm":{"type":"string","minLength":6,"title":"New Password Confirm"},"verification_code":{"type":"string","title":"Verification Code"}},"type":"object","required":["old_password","new_password","new_password_confirm","verification_code"],"title":"ChangePasswordRequest"},"ChangePaymentMethodRequest":{"properties":{"method":{"type":"string","title":"Method"},"details":{"type":"object","title":"Details"}},"type":"object","required":["method","details"],"title":"ChangePaymentMethodRequest"},"ChangePhoneRequest":{"properties":{"new_phone":{"type":"string","title":"New Phone"},"verification_code":{"type":"string","title":"Verification Code"}},"type":"object","required":["new_phone","verification_code"],"title":"ChangePhoneRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MessageResponse":{"properties":{"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"MessageResponse"},"PaymentInfo":{"properties":{"payment_id":{"type":"string","title":"Payment Id"},"course_id":{"type":"string","title":"Course Id"},"amount":{"type":"number","title":"Amount"},"paid_at":{"type":"string","format":"date-time","title":"Paid At"},"status":{"type":"string","title":"Status"}},"type":"object","required":["payment_id","course_id","amount","paid_at","status"],"title":"PaymentInfo"},"PaymentMethodResponse":{"properties":{"method":{"type":"string","title":"Method"},"details":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Details"}},"type":"object","required":["method","details"],"title":"PaymentMethodResponse"},"PaymentsResponse":{"properties":{"payments":{"items":{"$ref":"#/components/schemas/PaymentInfo"},"type":"array","title":"Payments"}},"type":"object","required":["payments"],"title":"PaymentsResponse"},"ProfileResponse":{"properties":{"user_id":{"type":"string","title":"User Id"},"first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"}},"type":"object","required":["user_id","first_name","last_name","email","phone","avatar_url"],"title":"ProfileResponse"},"SubscriptionInfo":{"properties":{"course_id":{"type":"string","title":"Course Id"},"course_name":{"type":"string","title":"Course Name"},"course_url":{"type":"string","title":"Course Url"},"subscribed_at":{"type":"string","format":"date-time","title":"Subscribed At"}},"type":"object","required":["course_id","course_name","course_url","subscribed_at"],"title":"SubscriptionInfo"},"SubscriptionsResponse":{"properties":{"subscriptions":{"items":{"$ref":"#/components/schemas/SubscriptionInfo"},"type":"array","title":"Subscriptions"}},"type":"object","required":["subscriptions"],"title":"SubscriptionsResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"BearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}